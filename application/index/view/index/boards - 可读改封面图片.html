<!DOCTYPE html>
<html>
<head>
    <title>OwO</title>
    {block name="include"}{include file="public:header" /}
    {include file="public:u" /}{/block}
    <link rel="stylesheet" type="text/css" href="_pub_/css/setting.css">
</head>
<body>
<div>
    <div>
        <div>
            <div class="contentRow py4">
                <div class="flex flex-wrap tabBar mxn2">
                    <a href="#">
                        <div class="tabItem px2 py2 active">
                            <div class="_1XZUm _2gVa_ _1sEX9 _3soYM _3En_g yv_ub">
                                <div class="tabText">Boards</div>
                            </div>
                        </div>
                    </a>
                    <a href="{:Url('pins')}">
                        <div class="tabItem px2 py2">
                            <div class="_1XZUm _2gVa_ _1sEX9 _3soYM _3En_g yv_ub">
                                <div class="tabText">Pins</div>
                            </div>
                        </div>
                    </a>
                    <a href="{:Url('likes')}">
                        <div class="tabItem px2 py2">
                            <div class="_1XZUm _2gVa_ _1sEX9 _3soYM _3En_g yv_ub">
                                <div class="tabText">Likes</div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div>
        <div class="Module UserProfileContent">
            <div class="DenzelReactBridge Module">
                <div class="userBoards">
                    <div class="ProfileGrid3col">
                        <div class="mb4">
                            <div id="container" class="GridItems centeredWithinWrapper flex flex-wrap myn4">
                                <div class="item cardWrapper py3" style="/*width: 301px;*/padding-bottom: 32px;">
                                    <div class="">
                                        <div class="ProfileBoardCard">
                                        <button class="createCard bg-white p0" data-toggle="modal" data-target="#mModal">
                                            <div class="_10BCU _2pHR3 _2dJwQ _1DdPg _330sB" style="width: 301px; height: 200px;">
                                                <div class="createRep flex items-center justify-center bg-super-light-gray" style="height: 200px; width: 301px;">
                                                    <i></i>
                                                </div>
                                            </div>
                                            <div class="px1 py2"><div class="_2UEuS _2t4gs _2XmQx OyBct _1g8Us _32TBK">Create board</div></div>
                                        </button>
                                        </div>
                                    </div>
                                </div>
                                {foreach $boards as $vbo}
                                <div class="item cardWrapper py3" style="/*width: 301px;*/">
                                <div draggable="true">
                                <div class="">
                                <div id="ProfileBoardCard" class="ProfileBoardCard">
                                <a href="##">
                                <div>
                                <div class="overflow-hidden" style="height: 200px;">
                                <div class="_10BCU _2pHR3 _2dJwQ _1DdPg _330sB" style="width: 301px; height: 200px;">
                                <div class="flex" style="margin: -1px;"><!-- react-text: 88 --><!-- /react-text -->
                                <div style="width: 300px;">
                                <div class="_20us6 _2dJwQ">
                                <div id="imgshow">
                                {if !$vbo.count == 0}
                                {if !$vbo.cover == NULL}
                                <div class="_1v5BH _119u-" style="top: 0px; left: 0px; width: 200px;"><div style="margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="">
                                    <div  class="relative" style="max-height: 200px;overflow: hidden;">
                                    <div class="imageWash imageWash2 absolute" style="border-radius: 5px;"></div>
                                    <img src="_pub_/{$vbo.cover}" style="width: 100%;border-radius: 5px;">
                                    </div>
                                </div></div>
                                </div>
                                {/if}
                                {foreach $bimg as $ibo}
                                {if $vbo.bid == $ibo.bid}
                                <div class="_1v5BH _119u-" style="top: 0px; left: 0px; width: 100px;"><div style="margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="">
                                    <div  class="relative" style="max-height: 100px;overflow: hidden;">
                                    <div class="imageWash absolute" style="border-radius: 5px;"></div>
                                    <img src="_pub_/{$ibo.url}" style="width: 100%;border-radius: 5px;">
                                    </div>
                                </div></div>
                                </div>
                                {/if}
                                {/foreach}
                                {else /}
                                <div class="_bb _119u-" style="top: 0px; left: 0px; width: 100px;"><div style="height: 101px; margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="height: 99px;"></div></div></div><div class="_bb _119u-" style="top: 0px; left: 0px; width: 100px;"><div style="height: 101px; margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="height: 99px;"></div></div></div><div class="_bb _119u-" style="top: 0px; left: 0px; width: 100px;"><div style="height: 101px; margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="height: 99px;"></div></div></div><div class="_bb _119u-" style="top: 0px; left: 0px; width: 100px;"><div style="height: 101px; margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="height: 99px;"></div></div></div><div class="_bb _119u-" style="top: 0px; left: 0px; width: 100px;"><div style="height: 101px; margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="height: 99px;"></div></div></div><div class="_bb _119u-" style="top: 0px; left: 0px; width: 100px;"><div style="height: 101px; margin: 1px;"><div class="bg-super-light-gray overflow-hidden" style="height: 99px;"></div></div></div>
                                {/if}
                                <!--  -->
                                </div></div></div></div></div></div><div class="relative"><div class="flex items-center mt1 info"><div class="px1 py1 flex-auto"><div class="_2UEuS _2t4gs _2XmQx _1h4d6 _1g8Us _32TBK _1CYUe">{$vbo["bname"]}</div><div class="subtitle"><div class="_2UEuS _2t4gs _2ROgJ OyBct _1g8Us"><span><span class="value">{$vbo["count"]}</span> <span class="label">Pins</span></span></div></div></div><div class="flex-none ml1"><div id="editButton" class="editButton"><button class="_3VBU6 _2Et8k _1h4d6 _3Af9R _1uo1H _1qeB_ _2KmW_ _1MI7p _2LBXb _2UEuS _32TBK _25GSA _3O7DM" type="button" data-toggle="modal" data-target="#myModal{$vbo['bid']}">Edit</button></div></div></div></div></div></a></div></div></div>
                                </div>
                                <div class="modal fade" id="myModal{$vbo['bid']}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <!--模态框-->
                                  <div class="modal-dialog" style="height: 500px;">
                                    <div class="modal-content">
                                      <form  action="{:Url('changesboard')}" enctype="" method="post">
                                          <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                            <h1 class="modal-title" id="mModalLabel">Edit your board <span>-[ {$vbo["bname"]} ]-</span><span><input class="boardbid{$vbo['bid']}" value="{$vbo['bid']}" style="width: 50px;opacity: 0;"readonly="true"></span></h1>
                                          </div>
                                          <div style="position: absolute;z-index: 1px;width: 1px;"><input name="bid" value="{$vbo['bid']}"></div>
                                          <div class="modal-body" style="padding:0;">
                                            <ul style="margin: 0px; border-radius: 0px; box-shadow: none;">
                                                <li>
                                                    <h3><label class="boardsLabel">Name</label></h3>
                                                    <div>
                                                        <input type="bname" class="" id="bname" name="bname" placeholder="type board name" value="{$vbo['bname']}">
                                                    </div>
                                                </li>
                                                <li class="descriptionWrapper">
                                                    <h3><label class="" for="boardEditDescription">Description</label></h3>
                                                    <div>
                                                    <textarea class="boardEditDescription" id="boardEditDescription" name="description" placeholder="What's your board about?"></textarea>
                                                    </div>
                                                </li>
                                                <li class="categoryWrapper">
                                                    <h3><label for="boardEditCategory">Category</label></h3>
                                                    <div>
                                                    <select class="Module Select" id="boardEditCategory" name="category">
                                                    <option value="other">What kind of board is it?</option>
                                                    </select>
                                                    </div>
                                                </li><li class="boardEditCover">
                                                    <h3>Cover</h3>
                                                    {if $vbo.count > 0}
                                                    <div class="boardCoverEdit{$vbo['bid']}"><button aria-label="Change" class="boardCoverEditButton Button Module btn hasText rounded" type="button" data-toggle="modal" data-target="#cModal{$vbo['bid']}"><span class="buttonText">Change</span></button></div>
                                                    {/if}
                                                </li>
                                                <li>
                                                    <h3><label class="boardsLabel">Secret</label></h3>
                                                    <div>
                                                    <!-- <label><div class="Module Checkbox fancyToggle fancyToggle styledToggle Checkbox1" style="margin: 0"><div class="slider"></div><p class="onText status">Yes</p><p class="offText status">No</p><input type="checkbox" class="Module Checkbox" id="secret" name="secret" value="on"></div></label> -->
                                                    </div>
                                                </li>
                                            </ul>
                                          </div>
                                          <div class="modal-footer" style="padding:8px; background:#fff;border-radius: 0 0 8px 8px;">
                                          <div class="formFooterDelete" style="float: left"><button aria-label="Delete board" class="deleteBoardButton Button Module btn hasText rounded" id="deleteBoardButton" type="button" onclick="del_confirm{$vbo['bid']}()"><span class="buttonText">Delete board</span></button></div>
                                            <button type="button" class="formFooterButton cancelButton NavigateButton Button Module btn hasText rounded" data-dismiss="modal">Cancel</button>
                                            <button type="submit" class="formFooterButton confirmButton Button Module btn hasText rounded primary">Save</button>
                                          </div>
                                          <div style="text-align:center;display:; color:red;font-size:18px;font-weight:bold;padding:10px;" id="mess"></div>
                                      </form>
                                    </div>
                                  </div>
                                </div>
                                <div>
                                    <div class="modal fade" id="cModal{$vbo['bid']}" tabindex="-1" role="dialog" aria-labelledby="cModalLabel{$vbo['bid']}" aria-hidden="true">
                                      <div class="modal-dialog" style="width: 700px;height: 440px;">
                                        <div class="modal-content">
                                          <form  action="{:Url('createboard')}" enctype="" method="post">
                                              <div class="modal-header">
                                                <button type="button" class="close formFooterButton{$vbo['bid']}" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                                <h1 class="modal-title" id="mModalLabel">Change Board Cover</h1>
                                              </div>
                                              <div class="modal-body" style="padding:0;">
                                                <div id="coverselect{$vbo.bid}" v-cloak>
                                                <ul>
                                                <li v-for="a in items">{{a.id}}</li>
                                                </ul>
                                                </div>
                                              </div>
                                              <div class="modal-footer" style="padding:8px">
                                                <button type="button" class="formFooterButton{$vbo['bid']} cancelButton NavigateButton Button Module btn hasText rounded" data-dismiss="modal">Cancel</button>
                                                <button aria-label="Save change" class="change{$vbo['bid']} savec formFooterButton confirmButton Button Module btn hasText rounded primary" type="button"><span class="buttonText">Save change</span></button>
                                              </div>
                                          </form>
                                        </div>
                                      </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    function del_confirm{$vbo['bid']}() {
                                        var r=confirm("Sure to delete this board?")
                                        if (r==true) {
                                            var $bid = $(".boardbid{$vbo['bid']}").val();
                                            var $mess = $('#mess');
                                            $.post("{:Url('delboard')}",{bid:$bid},function(json) {
                                                if (json.status == 1) {
                                                     $mess.slideDown(500,function(){
                                                                      $mess.css('display','block');
                                                                }).html(json.mess);
                                                    setTimeout("location='{:Url('boards')}'",1200);
                                                }else {
                                                    $mess.slideDown(500,function(){
                                                                      $mess.css('display','block');
                                                                }).html(json.mess);
                                                }
                                            })
                                        }else {
                                        return false;
                                        }
                                    }
                                    $(".boardCoverEdit{$vbo['bid']}").click(function() {
                                        $("#myModal{$vbo['bid']}").hide();
                                        var $bid = $(".boardbid{$vbo['bid']}").val();
                                        var $mess = $('#mess');
                                    //     $.post("{:Url('changecover')}",{bid:$bid},function(json) {
                                    //         // console.log(json.covers);
                                    //         // var $covers = json.covers.length;

                                    //         if (json.status == 1) {
                                    //             for (var i = json.covers.length - 1; i >= 0; i--) {
                                    //                 $ac = json.covers[i].url;
                                    //                 console.log($ac);
                                                    var vm = new Vue({
                                                    el:'#coverselect{$vbo.bid}',
                                                    data: {
                                                      items: [
                                                      {foreach $bimg as $ibo}
                                                      {if $vbo.bid == $ibo.bid}
                                                        {
                                                            id: "{$ibo.iid}",
                                                            url: "{$ibo.url}",

                                                        },
                                                      {/if}
                                                      {/foreach}
                                                      ]
                                                    },
                                                  //   methods: {
                                                  //   makeActive: function(item, index){
                                                  //     this.active = item.name;
                                                  //           for(var i=0; i<this.items.length;i++){
                                                  //             this.items[i].active = false;
                                                  //           }
                                                  //           this.items[index].active = true;
                                                  //   }
                                                  // }
                                                });
                                    //               }
                                    //              $mess.slideDown(500,function(){
                                    //                               $mess.css('display','block');
                                    //                         }).html(json.mess);
                                    //         }else {
                                    //             $mess.slideDown(500,function(){
                                    //                               $mess.css('display','block');
                                    //                         }).html(json.mess);
                                    //         }
                                    //     })
                                    })
                                    $(".formFooterButton{$vbo['bid']}").click(function() {
                                        $("#myModal{$vbo['bid']}").show();
                                    })
                                </script>
                                {/foreach}
                            </div>
                        </div>
                    </div>
                    <div class="secretBoardWrapper">
                        <div class="secretBoardHeader centeredWithinWrapper">
                            <span class="secretHeaderIcon"></span>
                            <span>
                                <span class="sectionTitle">Keep some boards secret</span>
                                <span class="text">—only you (and people you invite) can see these boards.</span>
                                <!-- <a href="###">learn</a> -->
                            </span>
                        </div>
                        <div class="ProfileGrid3col">
                        <div class="mb4">
                            <div class="GridItems centeredWithinWrapper flex flex-wrap myn4">
                                <div class="cardWrapper py3" style="/*width: 301px;*/">
                                    <div class="item">
                                        <div class="ProfileBoardCard">
                                        <button class="createCard bg-white p0" data-toggle="modal" data-target="#mModal">
                                            <div class="_10BCU _2pHR3 _2dJwQ _1DdPg _330sB" style="width: 301px; height: 200px;">
                                                <div class="createRep flex items-center justify-center bg-super-light-gray" style="height: 200px; width: 301px;">
                                                    <i></i>
                                                </div>
                                            </div>
                                            <div class="px1 py2"><div class="_2UEuS _2t4gs _2XmQx OyBct _1g8Us _32TBK">Create board</div></div>
                                        </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div>
    <div class="modal fade" id="mModal" tabindex="-1" role="dialog" aria-labelledby="mModalLabel" aria-hidden="true">
      <div class="modal-dialog" style="height: 240px;">
        <div class="modal-content">
          <form  action="{:Url('createboard')}" enctype="" method="post">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h1 class="modal-title" id="mModalLabel">Create board</h1>
              </div>
              <div class="modal-body" style="padding:0;">
                <ul style="margin: 0px; border-radius: 0px; box-shadow: none;">
                    <li>
                        <h3><label class="boardsLabel">Name</label></h3>
                        <div>
                            <input type="bname" class="" id="bname" name="bname" value="">
                        </div>
                    </li>
                    <li>
                        <h3><label class="boardsLabel">Secret</label></h3>
                        <div>
                        <!-- <label><div class="Module Checkbox fancyToggle fancyToggle styledToggle Checkbox1" style="margin: 0"><div class="slider"></div><p class="onText status">Yes</p><p class="offText status">No</p><input type="checkbox" class="Module Checkbox" id="secret" name="secret" value="on"></div></label> -->
                        </div>
                    </li>
                </ul>
              </div>
              <div class="modal-footer" style="padding:8px">
                <button type="button" class="formFooterButton cancelButton NavigateButton Button Module btn hasText rounded" data-dismiss="modal">Cancel</button>
                <button type="submit" class="formFooterButton confirmButton Button Module btn hasText rounded primary">Create</button>
              </div>
          </form>
        </div>
      </div>
    </div>
</div>
<script src="_pub_/js/test/js/waterfall.min.js"></script>
<script type="text/javascript">
$('#container').waterfall({
    itemCls: 'item',
    colWidth: 300,
    gutterWidth: 25,
    gutterHeight: -25,
    minCol: 2,
    maxPage: 1,
    checkImagesLoaded: false,
    path: function(page) {
        return ;
    }
});

function del_confirm() {
    var r=confirm("Sure to delete this board?")
    if (r==true) {
        var $bid = $('.boardbid').val();
        var $mess = $('#mess');
        $.post("{:Url('delboard')}",{bid:$bid},function(json) {
            if (json.status == 1) {
                 $mess.slideDown(500,function(){
                                  $mess.css('display','block');
                            }).html(json.mess);
                setTimeout("location='{:Url('boards')}'",1200);
            }else {
                $mess.slideDown(500,function(){
                                  $mess.css('display','block');
                            }).html(json.mess);
            }
        })
    }else {
    return false;
    }
}
$('.boardCoverEdit').click(function() {
    var $bid = $('.boardbid').val();
    var $mess = $('#mess');
    $.post("{:Url('changecover')}",{bid:$bid},function(json) {
        if (json.status == 1) {
             $mess.slideDown(500,function(){
                              $mess.css('display','block');
                        }).html(json.mess);
        }else {
            $mess.slideDown(500,function(){
                              $mess.css('display','block');
                        }).html(json.mess);
        }
    })
})
</script>

</body>
</html>